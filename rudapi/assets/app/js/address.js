var isDisabled=null!=Page.PageMode&&"approval"==Page.PageMode(),DtCurrCities=[],DtCurrDistrict=[];Page.PopulateMasterProvince=function(a,t,i,d){$.ajax({url:a,data:{},method:"GET",cache:!1,contentType:!1,processData:!1,success:function(a){var e;a.success?((e=a.data).splice(0,0,{id:"",text:"Pilih Provinsi"}),$("#dd_province").select2("destroy"),$("#dd_province").select2({data:e,placeholder:"Pilih Provinsi"}),0!=Page.FormData().provinsi_id()&&($("#dd_province").val(Page.FormData().provinsi_id()),$("#dd_province").select2().trigger("change")),$("#dd_province").select2().on("change",function(){var a;Page.PopulateMasterCities(t,i,d),"undefined"==typeof map||(a=_.find(Page.AllProvinceData,function(a){return a.id==$("#dd_province").val()}))&&(map.setCenter({lat:parseFloat(a.lat),lng:parseFloat(a.long)}),map.setZoom(8))}),setTimeout(function(){Page.PopulateMasterCities(t,i,d)},500)):swal("Error getting province master data!",a.message,"warning")}})},Page.PopulateMasterCities=function(a,e,t){var i=$("#dd_province").val();$.ajax({url:a+"/"+i,data:{},method:"GET",cache:!1,contentType:!1,processData:!1,success:function(a){a.success?((DtCurrCities=a.data).splice(0,0,{id:"",text:"Pilih Kabupaten/Kota"}),$("#dd_city").select2("destroy"),$("#dd_city").replaceWith($("<select />").attr("id","dd_city").addClass("form-control")),$("#dd_city").select2({data:DtCurrCities,placeholder:"Pilih Kabupaten/Kota"}),0!=Page.FormData().kabupaten_id()&&($("#dd_city").val(Page.FormData().kabupaten_id()),$("#dd_city").select2().trigger("change")),$("#dd_city").select2().on("change",function(){var a;Page.PopulateMasterDistricts(e,t),"undefined"!=typeof map&&("undefined"!=typeof geocoder?(a="undefined"!==(a=_.find(DtCurrCities,function(a){return a.id==$("#dd_city").val()}))?a.text:a.prov,geocoder.geocode({address:a},function(a,e){"OK"===e?(map.setCenter(a[0].geometry.location),map.setZoom(12)):console.log("Geocode was not successful for the following reason: "+e)})):(a=_.find(DtCurrCities,function(a){return a.id==$("#dd_city").val()}))&&(map.setCenter({lat:parseFloat(a.lat),lng:parseFloat(a.long)}),map.setZoom(12)))}),setTimeout(function(){Page.PopulateMasterDistricts(e,t),isDisabled&&$("#dd_city").attr("disabled","disabled")},500)):swal("Error getting kabupaten master data!",a.message,"warning")}})},Page.PopulateMasterDistricts=function(a,e){var t=$("#dd_city").val();$.ajax({url:a+"/"+t,data:{},method:"GET",cache:!1,contentType:!1,processData:!1,success:function(a){if(a.success){(DtCurrDistrict=a.data).splice(0,0,{id:"",text:"Pilih Kecamatan"}),$("#dd_district").select2("destroy"),$("#dd_district").replaceWith($("<select />").attr("id","dd_district").addClass("form-control")),$("#dd_district").select2({data:DtCurrDistrict,placeholder:"Pilih Kecamatan"}),"function"==typeof Page.FormData().kecamatan_id&&0!=Page.FormData().kecamatan_id()&&($("#dd_district").val(Page.FormData().kecamatan_id()),$("#dd_district").select2().trigger("change"));try{$("#dd_district").select2().on("change",function(){var a;Page.CekMasjid(),"undefined"!=typeof map&&("undefined"!=typeof geocoder?(a="undefined"!==(a=_.find(DtCurrDistrict,function(a){return a.id==$("#dd_district").val()}))?a.address:"",geocoder.geocode({address:a},function(a,e){"OK"===e?(map.setCenter(a[0].geometry.location),map.setZoom(14)):console.log("Geocode was not successful for the following reason: "+e)})):(a=_.find(DtCurrDistrict,function(a){return a.id==$("#dd_district").val()}))&&(map.setCenter({lat:parseFloat(a.lat),lng:parseFloat(a.long)}),map.setZoom(14)))})}catch(a){}e&&($("#dd_district").select2().on("change",function(){Page.PopulateMasjidByDistrict()}),setTimeout(function(){Page.PopulateMasjidByDistrict(),isDisabled&&$("#dd_district").attr("disabled","disabled")},500))}else swal("Error getting kecamatan master data!",a.message,"warning")}})},Page.PopulateMasjidByDistrict=function(){var a,e,t=Page.UrlLoadMasjidByDistrict;void 0!==t?(a=$("#dd_district").val(),e=$("#seleksi_type").val(),$.ajax({url:t+"/"+a+"/"+e,data:{},method:"GET",cache:!1,contentType:!1,processData:!1,success:function(a){a.success?(a.data.splice(0,0,{id:"",text:"Pilih Masjid/Mushalla"}),$("#dd_masjid").select2("destroy"),$("#dd_masjid").replaceWith($("<select />").attr("id","dd_masjid").addClass("form-control")),$("#dd_masjid").select2({data:a.data,placeholder:"Pilih Masjid / Mushalla"}),"masjid"==e?0!=Page.FormData().masjid_id()&&($("#dd_masjid").val(Page.FormData().masjid_id()),$("#dd_masjid").select2().trigger("change"),isDisabled&&$("#dd_masjid").attr("disabled","disabled")):0!=Page.FormData().mushalla_id()&&($("#dd_masjid").val(Page.FormData().mushalla_id()),$("#dd_masjid").select2().trigger("change"),isDisabled&&$("#dd_masjid").attr("disabled","disabled")),$("#dd_masjid").on("change",function(){Page.GetIDMasjid()})):swal("Error getting kecamatan master data!",a.message,"warning")}})):alert("URL PopulateMasjidByDistrict is not set")},Page.SetFilterKabupaten=function(){var e,t,a;null!=Page.DataKabupaten?(e=$("#filter_provinsi").val(),$("#filter_kabupaten").find("option").remove(),(t=$("#filter_kabupaten")[0]).add(new Option("-Semua Kabupaten / Kota-","")),0<(a=_.filter(Page.DataKabupaten,function(a){return a.provinsi_id==e})).length&&(a.forEach(a=>{t.add(new Option(a.kabupaten_name,a.kabupaten_id))}),null!=Page.SelectedKabupaten&&"0"!=Page.SelectedKabupaten&&($("#filter_kabupaten").val(Page.SelectedKabupaten),$("#filter_kabupaten").trigger("change")))):alert("Data kabupaten is not defined")},Page.SetFilterKecamatan=function(){var a;null!=Page.DataKecamatan?(a=$("#filter_kabupaten").val(),$.ajax({url:Page.FilterKecamatanUrl+"/"+a,data:{},method:"GET",cache:!1,contentType:!1,processData:!1,success:function(a){var e;a.success?($("#filter_kecamatan").find("option").remove(),(e=$("#filter_kecamatan")[0]).add(new Option("-Semua Kecamatan-","")),0<a.data.length&&(a.data.forEach(a=>{e.add(new Option(a.kecamatan_name,a.kecamatan_id))}),null!=Page.SelectedKecamatan&&"0"!=Page.SelectedKecamatan&&$("#filter_kecamatan").val(Page.SelectedKecamatan))):alert("Error getting kecamatan master data!")}})):alert("Data kecamatan is not defined")},Page.PopulateAllProvinceData=function(a){$.ajax({url:a,data:{},method:"GET",cache:!1,contentType:!1,processData:!1,success:function(a){Page.AllProvinceData=a.data}})};